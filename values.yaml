# Default values for claude-web-k8s-instance
# This chart deploys a per-instance Claude Code environment

# Instance identification
instanceName: "a1b2c3d4" # Will be overridden by ArgoCD (hash of description)
instanceDescription: "Backend API development"
userid: "user123" # User who owns this instance

# Feature flags
features:
  golang: true
  typescript: true
  ansible: true
  postgres: true
  graphql: false

# Main container image
image:
  repository: ghcr.io/transform-ia/claude-image
  tag: latest
  pullPolicy: IfNotPresent

# Replica count
replicaCount: 1

# ServiceAccount settings
serviceAccount:
  create: true
  automountToken: false

# Storage configuration
storage:
  workspace:
    enabled: true
    size: 10Gi
    storageClass: longhorn
    accessMode: ReadWriteOnce
  home:
    enabled: true
    size: 1Gi
    storageClass: longhorn
    accessMode: ReadWriteOnce
  tmp:
    size: 10Gi # emptyDir
  cache:
    size: 5Gi # emptyDir
  npmCache:
    size: 1Gi # emptyDir
  claudeLock:
    size: 10Mi # emptyDir

# GitHub token (from secret in user namespace)
githubToken:
  secretName: github-credentials
  secretKey: token

# Environment variables
env:
  TZ: America/Montreal
  DISABLE_AUTOUPDATER: "1"
  OTEL_EXPORTER_OTLP_ENDPOINT: http://tempo.claude.svc.cluster.local:4318
  OTEL_SERVICE_NAME: claude-web

# SSH configuration
ssh:
  privateKey:
    secretName: ssh-private-key
  knownHosts:
    github: true
    custom: []

# Git configuration
gitConfig:
  userName: "Claude Code"
  userEmail: "claude@robotinfra.com"
  defaultBranch: master

# Kubernetes cluster configurations (for multi-cluster kubectl access)
kubeconfigs:
  clusters:
    cc: |
      apiVersion: v1
      clusters:
      - cluster:
          certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJkekNDQVIyZ0F3SUJBZ0lCQURBS0JnZ3Foa2pPUFFRREFqQWpNU0V3SHdZRFZRUUREQmhyTTNNdGMyVnkKZG1WeUxXTmhRREUzTmpZMk1qQXhNVGd3SGhjTk1qVXhNakkwTWpNME9ETTRXaGNOTXpVeE1qSXlNak0wT0RNNApXakFqTVNFd0h3WURWUVFEREJock0zTXRjMlZ5ZG1WeUxXTmhRREUzTmpZMk1qQXhNVGd3V1RBVEJnY3Foa2pPClBRSUJCZ2dxaGtqT1BRTUJCd05DQUFRZ3FMUTZ6TitRZ011SkFpREVCd2lQeXM0SXBlVXpaQmtrOUxWNy8yNGQKeXllMXNiRGY1cW5BRjBVVjJrMkEyS2FtNjVLTE5oK2xuVVA2VExoeDJkOXhvMEl3UURBT0JnTlZIUThCQWY4RQpCQU1DQXFRd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBZEJnTlZIUTRFRmdRVVIvb0lBSVlmZGJsV29hOUs2Zk92Cll4a0ZaaVl3Q2dZSUtvWkl6ajBFQXdJRFNBQXdSUUloQU9wREt6TWxoMCswcGhydGl5ak9RNS8yazVGVDFzc3IKbzJTNzR1a0V4ZTBnQWlCNEpCYTYrak10dUg3RUhPaTlNQ3pBVkk2MlVjcTdNVlZOOXUxbW9Cb1hGUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
          server: https://10.255.255.1:6443
        name: cc
      contexts:
      - context:
          cluster: cc
          user: cc
        name: cc
      current-context: cc
      kind: Config
      users:
      - name: cc
        user:
          client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJrakNDQVRlZ0F3SUJBZ0lJRVNnSTNmVjZhMFl3Q2dZSUtvWkl6ajBFQXdJd0l6RWhNQjhHQTFVRUF3d1kKYXpOekxXTnNhV1Z1ZEMxallVQXhOelkyTmpJd01URTRNQjRYRFRJMU1USXlOREl6TkRnek9Gb1hEVEkyTVRJeQpOREl6TkRnek9Gb3dNREVYTUJVR0ExVUVDaE1PYzNsemRHVnRPbTFoYzNSbGNuTXhGVEFUQmdOVkJBTVRESE41CmMzUmxiVHBoWkcxcGJqQlpNQk1HQnlxR1NNNDlBZ0VHQ0NxR1NNNDlBd0VIQTBJQUJGVmRMQ3ZDeEI3K3QrWTIKdXZqVk1HMHZZUGtJZTJMUktyazBjU0pBamlFQTBzWjdnL1I1bGpZVDF3L0RqR2xoaYwdUFnSEcwZzFkdytQVgorL1AzbG1palNEQkdNQTRHQTFVZER3RUIvd1FFQXdJRm9EQVRCZ05WSFNVRUREQUtCZ2dyQmdFRkJRY0RBakFmCkJnTlZIU01FR0RBV2dCUkxyV3lRUlN4YUZobTZ5MU9JYmIwMHAzczVVVEFLQmdncWhrak9QUVFEQWdOSkFEQkcKQWlFQTQvYUJ4ZmJxSXVOWVR4bnAzTGlsVXZPNFQrVEM2dlZjSG9hRUpFdEJvOGNDSVFDL3hQMXZGeUx4SUNkcwoxL2YwcXJMbm9naFF6bzRtZDZKRGJvUDdhY045SUE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQpNSUlCZHpDQ0FSMmdBd0lCQWdJQkFEQUtCZ2dxaGtqT1BRUURBakFqTVNFd0h3WURWUVFEREJock0zTXRZMnhwClpXNTBMV05oUURFM05qWTJNakF4TVRnd0hoY05NalV4TWpJME1qTTBPRE00V2hjTk16VXhNakl5TWpNME9ETTQKV2pBak1TRXdId1lEVlFRRERCaHJNM010WTJ4cFpXNTBMV05oUURFM05qWTJNakF4TVRnd1dUQVRCZ2NxaGtqTwpQUUlCQmdncWhrak9QUU1CQndOQ0FBUk52dkZZRXVCdlFLNUVMTzBmOUFSRVc5WkErSlhTR2E5QkJOM3dHL0ppCkpZM1lGRUlHRUtmWHZ6MEZKTzRiUCtJcW9ZcGNzem1TZmRuVWhjdHpwc3FubzBJd1FEQU9CZ05WSFE4QkFmOEUKQkFNQ0FxUXdEd1lEVlIwVEFRSC9CQVV3QXdFQi96QWRCZ05WSFE0RUZnUVVTNjFza0VVc1doWVp1c3RUaUcyOQpOS2Q3T1ZFd0NnWUlLb1pJemowRUF3SURTQUF3UlFJaEFKbTgrdWZBZVNqN2VaeDg5eEQ3T3RHaUVCTzNReW1GClA2SDlkQWlTRVZSY0FpQjV1c0lzd1Y4YzlpWXFySVpiSC9GNGFzQ1lUdjNoRWwvWm8ycDNheXppeWc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
          client-key-data: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSUR0Zy9Sa2dsbWRZQUJjckoyeWtFa0pnbTdVcnNjR0ZsK1QyZElsYnlOdWpvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFVlYwc0s4TEVIdjYzNWphTitOVXdiUzlnK1FoN1l0RXF1VFJ4SWtDT0lRRFN4bnVEOUhtVwpOaFBYRDhPTWFXR0ovUzRDQWNiU0RWM0Q0OVg3OC9lV2FBPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=

    kindKind: |
      apiVersion: v1
      clusters:
      - cluster:
          certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lJYmJmWDlHbENqSjR3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TlRFeE1UZ3dNRFF3TURSYUZ3MHpOVEV4TVRZd01EUTFNRFJhTUJVeApFekFSQmdOVkJBTVRDbXQxWW1WeWJtVjBaWE13Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLCkFvSUJBUURuemhXNjZDR052dS9zWHo3bnpWMk9kSkFlWTVTYmxCWFpOSkRkdjZxbzVNTGZDdXFabXhkbTU1U0MKdTlVSXR0dFVSVWFZa2srcHp5R3FUOUpsdldxcHFVQzBpL1V5TUZOLytqeWk0alUvMzZKZjgvM3RiekVROWdMOAo4TS9BZGF6RXlsVHJFeHY4UVM1dzRRK1dxRGhMeUc0K2F3eFllK1A4ZStHaVNKQTVXUmhCSkVPWVNkdkR2bnZBCkl2S0tUd0g4ZWkyUTY1ZFA2ZnJURDlhQURLVFBiY0k3YnZKQ3o3S0dYU1ZsMDVlaDlRZXcza21HNWF1c2crUE8KK2xkdzJNQ3BmRHdIcVkwTGJGbHdMNU5Mdm1CMThiQ1dXMVIyQm4yTVRjUW1xZFhxMUlSUWlWY1ZiQ2VLRVZNVAp4TlkyZ2Q5eDlKMmR4NVhiVThSU1NjbEljanJEQWdNQkFBR2pXVEJYTUE0R0ExVWREd0VCL3dRRUF3SUNwREFQCkJnTlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJUYllKZDBvbnl6OVRUN3dRb01xalcxeHBUVnNqQVYKQmdOVkhSRUVEakFNZ2dwcmRXSmxjbTVsZEdWek1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ1ZLTzdVQkxIRApnYmFUWE5NQndpYVJ6OFlqS2IzZnlTY3NSUndKeUdjbURJbTB2S0xIV011ajYvQndiK3ZIVmZpUE4weTRyTkF0ClYvd3c0SlAwdmp4TW9meGJEVEoyc09MS3VlYS9kU3dtNjhxZVpvYlVDb0FUNXJLbzBkQmZtKzkxQ3pqbDQyZlQKU0tOajJaN0VCUG8zSEQwaFRzOW9zejFyR2dyakU5bFJVeXM4bWxiaGFERjdEWk1iTjgxc2RGRWxtUW51SDNGbApzdEhDY0EwaXFXK2tqZ09MVVM3MFkybncwa3E5a3BkSkpORlpSeHRvNnFVNFhXQlNJbHJ1QW5vRXpJUmhSRG9jCldEQmsxSm5VK1l1bmhLRGp4ZWNsa0l3NjNGM2ZEYnNpTlFoTS9QT3o2QXh1WDBwNWtGZEZ3MHBtMXhZWkpZRU8KRXBIMC9CZlJicElyCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
          server: https://127.0.0.1:35593
        name: kind-kind
      contexts:
      - context:
          cluster: kind-kind
          user: kind-kind
        name: kind-kind
      current-context: kind-kind
      kind: Config
      users:
      - name: kind-kind
        user:
          client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURLVENDQWhHZ0F3SUJBZ0lJY2owRERQKy9aK0l3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TlRFeE1UZ3dNRFF3TURSYUZ3MHlOakV4TVRnd01EUTFNRFJhTUR3eApIekFkQmdOVkJBb1RGbXQxWW1WaFpHMDZZMngxYzNSbGNpMWhaRzFwYm5NeEdUQVhCZ05WQkFNVEVHdDFZbVZ5CmJtVjBaWE10WVdSdGFXNHdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFEUWQ0QncKOU51UjhkZ2JKZGY1aEtNcUdCS3VTSlNZUlpxemN4UXF2U2hEZnJKN3BMQW92dkRvRG9BcllNZHRFLzhxRzhCRgpVVVgwM2RRdDJoRHdQSGMwQSt4OHVEWmZ6Z3VrQUpYQm5RSUFCTHpzVDdpUkx6NjZGdEVROGNqbG9jRmw4MUp2CjBTaFI1cEJIV2VnRTI1S2R6TGcwY1hOVDJ5SCt2RGhrcmYzbTkvVTVZbFBUR3U2NWlTTlNwYVZEQy9TM1Fja1IKM2FmZDczOFVVTlJXVHc5Qjg3Y2J2UVB6N1hMUTRwTTYxK0o1T1hEOXQxMFdBQk5CcGhna1NZRU5INjh0YmlPVgpMSzRCZE9uUnhVa0dIeXN4NHdqK0xxOGZuUXk3cGM5d3ZWWi9ZMEV5N3FPdEdiL2xpdW1FV2VEcnhkdHF3ZklsCnBGYjZZYVdPTEZaUUJpVURBZ01CQUFHalZqQlVNQTRHQTFVZER3RUIvd1FFQXdJRm9EQVRCZ05WSFNVRUREQUsKQmdnckJnRUZCUWNEQWpBTUJnTlZIUk1CQWY4RUFqQUFNQjhHQTFVZEl3UVlNQmFBRk50Z2wzU2lmTFAxTlB2QgpDZ3lxTmJYR2xOV3lNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUE2SEsveEtWTlNCbWZyWlUrK0N0dmN2MVlQClpIbitzSVhhbW5tQkJ6dGhaT3kycktPL0diVzhkR3pMYnBwMEFVZE91TEFaYjl5bC9HRXE2Y21uMlpFWTd1aEMKSkEzVUVtSW5tRVVmYWh0TTZSbnJGWFROU2tZbkRVMHVFUVBDRzhYb1A5cHpnL3A3SldhK2ExYnRQcnlXeGtoOApOb3IvbXRQM2ZtNjBvZ0J0Q3VjazRTZHJhT1Z3MGV6Zjl6bGJNUytVWHp6WENHVFVWVmViNTlkbXhDbFlFZ3BMCkpWK1lwUEJRVkV4WmJqY3R4WWJXTU9ucTBXSnhxTmpzczFtNjBwOUdwQmxKM1U2M2hCZEY0cGxpNzRpZTlOQkUKb2k3bFZ2Y1BvMHhkYTlqMExzV3JpVDhDb05QREZ1SWwrbnJqRU14N0QydzllM0EzK003S3RtQi9pNzRaCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
          client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBMEhlQWNQVGJrZkhZR3lYWCtZU2pLaGdTcmtpVW1FV2FzM01VS3Iwb1EzNnllNlN3CktMN3c2QTZBSzJESGJSUC9LaHZBUlZGRjlOM1VMZG9ROER4M05BUHNmTGcyWDg0THBBQ1Z3WjBDQUFTODdFKzQKa1M4K3VoYlJFUEhJNWFIQlpmTlNiOUVvVWVhUVIxbm9CTnVTbmN5NE5IRnpVOXNoL3J3NFpLMzk1dmYxT1dKVAoweHJ1dVlralVxV2xRd3YwdDBISkVkMm4zZTkvRkZEVVZrOFBRZk8zRzcwRDgrMXkwT0tUT3RmaWVUbHcvYmRkCkZnQVRRYVlZSkVtQkRSK3ZMVzRqbFN5dUFYVHAwY1ZKQmg4ck1lTUkvaTZ2SDUwTXU2WFBjTDFXZjJOQk11NmoKclJtLzVZcnBoRm5nNjhYYmFzSHlKYVJXK21HbGppeFdVQVlsQXdJREFRQUJBb0lCQUJ1ZFRqSlMvU2hKWDZzWQo5RHhsU1lmYlJkT050eGF2VndnaEI3R0crbWZCSEx1QmhxUkp4czBMNlZ2VnAycUNQNXdWcmxQVnFaZi9oVFVkCnNkTmc3eGxyZTZRa2NzVExjb0g0WWQ0U2drcW1WZ1ucEhkTVNZUTFDWW9KRXBKTjZibldPdWFucE5qL01HclkKaWdJNnVTS1dGUlhvQVYyV1VERXM2dnQxNE5yN1l0dGZSWlFwNExRcG05RSs0QW5VbmRMa0hseXlldG5GVW5ZTQplUXVObEt0YkN5Vjl0ZmlGc0hNbVdLY3c5Y005a3BFZmFNenc4UGN2U3lxUmQ5b3NRWDdoZ3B1RzVjLzFRMzVICnBrWnBwNXl0aGh2UE5aTmRXNUJaOW01SWsrTUVQMktVTURLSnhhMytRYVBkQzZmd0ZHNi9zdWRyUUpmY3RNM1gKeDJYNy95RUNnWUVBMDM0MkFSdm05WDZlMzNZWkwxdVFUSjNEVnNPQU5kdWRkeEE3KzNwSGpuc0JtWHFXVzZIdQpJdm5INFErQjZ2K2pZSjVpS2F0WGowK0tseDRFem5DbGdKeHphUG5ZMHM2amdZaVFlcWE2dEZTUHVUdFdDL1hRCmFycWpQbE5IQTVBWjIzb252VGtvSVl0S1dMWUZBZWRmcWhFWEl2dFFWYnlUb29SZmd1Nmd6bzhDZ1lFQS9GWkMKYmw5MkNxcWcwY3RUbTZzSUpudCs5Y0wvTnBlUkZ6WVdEYW0wRUVLd0x5Wkx5aVdKNFNLWFZ4QXl0YWFMM2RrSwo2VjdQdk9uMkFQMCs3Tm9WNUNta09YNnk3VnVlT3oyc0NxQXcwYjBORmdDN3ZLNzJPVC9mdWtZYlpWajRRSzN3CkVDRFlrUWZYNldmZU9TOFJMUmxnMTY4ZXpxQTRDSGUzWEZvWnZFMENnWUJYNktrMzhzb2dsdjRnc20wcmd5cksKdmZUWkZyQXZNdGNVQzNwelFGT0lCTmNZWFowci8zWUZzYitFYkRhN1lJRWZneFlZYmZFYVQ1eXl6Ylovdk5EKwpVWW1qUTk3OVdRa2JxWkVzZWlzM0U4TWQ0bTBVMFp0TkVjRVRBZmlOb1pNdDZHdW1PcURVdUpveG40OGJTSG82CkxacHBYdjc0ZEVjRmtYSkY4VHlFUHdLQmdRRE52NVBwSlNNOXJVVDE2eUVnRThQUWhPL1BlaERZdFpzVFh3RjYKWUg0MnAvbTZhREp5QUV1OWE1UVU1RnRFckNqdFdqVEFkcE5TU1Q1U0xpdnB1aVVSWmpiR3ZwMHNWb0RkY3ZyZApxeUpEVWkvaVdmUzU4N3RHa09OZW9oMWlkTG52R3lSY01qd0RmVzY2blB1Z2l0VXBmY0R0L0pkVkNXVEcycjZDCnFlREVIUUtCZ0NuSGhnWFllWEpLUzZmRXQ5dFgxSTRRMi83UHJJL3dJYjRtV0hiL3NrekFDamZSdGJKNldZUTYKTnFSVmVubXFPN2NiQVVmOEs2WUt1bTMvRUlxWjVwczJublZTbHN0WDhuUmZsL2VycFVScEZSb1JNZEdubG84TQpDb29Mbk5WNzM1T1JZRllrMGwvRS9yVmtTR09kVlRPL3JJWVMxcDNrNmFoc25CVlJFTTRTCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==

    defaultCluster: |
      apiVersion: v1
      clusters:
      - cluster:
          certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJkakNDQVIyZ0F3SUJBZ0lCQURBS0JnZ3Foa2pPUFFRREFqQWpNU0V3SHdZRFZRUUREQmhyTTNNdGMyVnkKZG1WeUxXTmhRREUzTmpjd05ETTVPRFl3SGhjTk1qVXhNakk1TWpFek16QTJXaGNOTXpVeE1qSTNNakV6TXpBMgpXakFqTVNFd0h3WURWUVFEREJock0zTXRjMlZ5ZG1WeUxXTmhRREUzTmpjd05ETTVPRFl3V1RBVEJnY3Foa2pPClBRSUJCZ2dxaGtqT1BRTUJCd05DQUFSb2tUM3M1TElsckxIQ3AyQndWYmZxZ1ZybjVjVWIzYUtZWlFqZUNRdGwKbTU3U2RhVnJ4Z0MyKzdPa05MNzkwaXNmaUNubVl5M0s1QXE3WmV3eHNyUldvMEl3UURBT0JnTlZIUThCQWY4RQpCQU1DQXFRd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBZEJnTlZIUTRFRmdRVWwvd1B1SXloMmZhMGZGeUdncXVSCjlxbzY3eWt3Q2dZSUtvWkl6ajBFQXdJRFJ3QXdSQUlnVHdQSHNXRVcvSFZRanRkUXVhditYZzF4UFEyYnpacGUKTEFpNnNCQVdreTRDSUdsK28rdDhJUzRSYnBZN0hsN1h5Y1ZoTmRMZnlRNnM2dExEcXF4TFFscDEKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
          server: https://127.0.0.1:6443
        name: default
      contexts:
      - context:
          cluster: default
          user: default
        name: default
      current-context: default
      kind: Config
      users:
      - name: default
        user:
          client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJrVENDQVRlZ0F3SUJBZ0lJSHJZUXZUZndrYmt3Q2dZSUtvWkl6ajBFQXdJd0l6RWhNQjhHQTFVRUF3d1kKYXpOekxXTnNhV1Z1ZEMxallVQXhOelkzTURRek9UZzJNQjRYRFRJMU1USXlPVEl4TXpNd05sb1hEVEkyTVRJeQpPVEl4TXpNd05sb3dNREVYTUJVR0ExVUVDaE1PYzNsemRHVnRPbTFoYzNSbGNuTXhGVEFUQmdOVkJBTVRESE41CmMzUmxiVHBoWkcxcGJqQlpNQk1HQnlxR1NNNDlBZ0VHQ0NxR1NNNDlBd0VIQTBJQUJMU0ovTTFjV1dPYThDeTcKNURxZWlNTEpnenh5bzZlS0U4WXBmQldzUUh0WUVVY3h2RUxaaFZBc0tWejM4MHMzWHJLR1kxN3h6MWgzKzNVeApvQnFhZUNHalNEQkdNQTRHQTFVZER3RUIvd1FFQXdJRm9EQVRCZ05WSFNVRUREQUtCZ2dyQmdFRkJRY0RBakFmCkJnTlZIU01FR0RBV2dCU1VabUlDYThUZW80eTFLaGxRWStncWZheXJZREFLQmdncWhrak9QUVFEQWdOSUFEQkYKQWlCa1h6Z2pFZzZienRCbTVPdmFleDRES2dvOFBYdzJmbFhRc1Uwc1V3c0V6QUloQUt0Y2ZrbHhXdnhoK0N5QgpPYWdneFBYTlVBV3N6Qi95N3dKY2JTSy9oc0orCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJkakNDQVIyZ0F3SUJBZ0lCQURBS0JnZ3Foa2pPUFFRREFqQWpNU0V3SHdZRFZRUUREQmhyTTNNdFkyeHAKWlc1MExXTmhRREUzTmpjd05ETTVPRFl3SGhjTk1qVXhNakk1TWpFek16QTJXaGNOTXpVeE1qSTNNakV6TXpBMgpXakFqTVNFd0h3WURWUVFEREJock0zTXRZMnhwWlc1MExXTmhRREUzTmpjd05ETTVPRFl3V1RBVEJnY3Foa2pPClBRSUJCZ2dxaGtqT1BRTUJCd05DQUFUN2xkK1ltRU5wdGpZWFQ1Sk14YTJMcGFJK0l1aEdOSFZHRXhVeTVKTnkKRVdIOTR5SkY0bUNhZlQrSDNWV3Q4RGgxcm1UdXpLay9WK3V5TjJjclhhRWFvMEl3UURBT0JnTlZIUThCQWY4RQpCQU1DQXFRd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBZEJnTlZIUTRFRmdRVWxHWmlBbXZFM3FPTXRTb1pVR1BvCktuMnNxMkF3Q2dZSUtvWkl6ajBFQXdJRFJ3QXdSQUlnR1lZWUsyYXlYem5BWHRmV3FBR2N0K2c4SExKekVRWEQKVDFLZm5SWk9vU01DSUY1VW51cVhrdXdrcldXZS96OXdwOTFYRDJQTmhpZThla0MvVDR2cUZkVXMKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
          client-key-data: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSUc2TkwwdjRxUXdBNUNFSDN4ejhaQUtqZUdSQVZrU0xzYkxmbDBSUXlPR3hvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFdEluOHpWeFpZNXJ3TEx2a09wNkl3c21EUEhLanA0b1R4aWw4RmF4QWUxZ1JSekc4UXRtRgpVQ3dwWFBmelN6ZGVzb1pqWHZIUFdIZjdkVEdnR3BwNElRPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=

  # Primary cluster (mounted as default ~/.kube/config)
  primary: cc

# Resource limits
resources:
  requests:
    memory: "512Mi"
    cpu: "250m"
  limits:
    memory: "2Gi"
    cpu: "1000m"

# Service configuration
service:
  type: ClusterIP
  port: 8080

# Ingress configuration
ingress:
  enabled: true
  className: nginx
  hostname: "" # Defaults to {hash}.dev.robotinfra.com
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/ssl-redirect: "true"

# Database (CNPG) configuration
database:
  enabled: false # Set to true to create CNPG Database
  namespace: database
  cluster: postgresql
  name: "" # Defaults to {instanceName}-db
  owner: claude
  instance: 1
  reclaimPolicy: delete

# ConfigMap for system prompt
configMap:
  systemPrompt: |
    You are Claude Code, an AI programming assistant.
    Help users with their coding tasks in this Kubernetes environment.

# RBAC configuration
rbac:
  create: true # Create RBAC resources (Role, RoleBinding)

# Network policies
networkPolicy:
  enabled: true # Enable zero-trust network policies
  allowDNS: true
  allowedEgressHosts:
    - api.github.com
    - github.com
    - registry-1.docker.io

# MCP Servers (always included)
mcpServers:
  context7:
    enabled: false # Use shared service in claude namespace, not a sidecar
    image: transformia/context7-mcp
    tag: "1.0.27"

  playwrightBrowser:
    enabled: false # Use separate deployment in claude namespace
    image: transformia/playwright-browser
    tag: "1.0.3"
    ports:
      mcp: 8831
      novnc: 6901
      vnc: 5900

  dockerhubMcp:
    enabled: false # Use separate deployment in claude namespace
    image: ghcr.io/transform-ia/dockerhub-mcp
    tag: "v0.17.0"

# Feature-specific containers
golang:
  image: ghcr.io/transform-ia/golang-image
  tag: latest
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"

typescript:
  image: ghcr.io/transform-ia/typescript-image
  tag: latest
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"

postgres:
  image: postgres
  tag: 16-alpine
  resources:
    requests:
      memory: "128Mi"
      cpu: "50m"

graphql:
  hasura:
    image: hasura/graphql-engine
    tag: v2.36.0
    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"

ansible:
  image: cytopia/ansible
  tag: 2.20.0-alpine
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
